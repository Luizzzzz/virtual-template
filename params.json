{"name":"Virtual-template","tagline":"Template engine using virtual-dom","body":"virtual-template\r\n==============================\r\n[![build](https://circleci.com/gh/livoras/virtual-template/tree/master.png?style=shield)](https://circleci.com/gh/livoras/virtual-template?branch=master) \r\n[![codecov.io](https://codecov.io/github/livoras/virtual-template/coverage.svg?branch=master)](https://codecov.io/github/livoras/virtual-template?branch=master) \r\n[![Dependency Status](https://david-dm.org/livoras/virtual-template.svg)](https://david-dm.org/livoras/virtual-template)\r\n[![npm version](https://badge.fury.io/js/virtual-template.svg)](https://badge.fury.io/js/virtual-template) \r\n\r\n[![js-standard-style](https://cdn.rawgit.com/feross/standard/master/badge.svg)](https://github.com/feross/standard)\r\n\r\n## Install\r\n\r\n```html\r\n<script src=\"your-template-engine.js\"></script>\r\n<script src=\"virtual-template/dist/virtual-template.min.js\"></script>\r\n```\r\n\r\n## How to use\r\n\r\nHTML:\r\n\r\n```html\r\n<script id=\"user\" type=\"text/template\">\r\n  <h1>{firstName + ' ' + lastName}</h1>\r\n  <ul>\r\n    {each tags as value i}\r\n      {if i % 2 == 0}\r\n        <li style='color: red'>索引 {i + 1} ：{value}</li>\r\n      {else}\r\n        <li style='color: blue'>索引 {i + 1} ：{value}</li>\r\n      {/if}\r\n    {/each}\r\n  </ul>\r\n</script>\r\n\r\n<script>\r\n  // 构建渲染函数\r\n  var userTpl = document.getElementById('user').innerHTML\r\n  var userCompiler = template.compile(userTpl)\r\n</script>\r\n```\r\n\r\n### 方式一：单个模版实例\r\n\r\n```javascript\r\n// 用渲染函数构建虚拟模版实例\r\nvar user = vTemplate(userCompiler, {\r\n  firstName: 'Jerry',\r\n  lastName: 'Green',\r\n  tags: ['文艺', '博客', '摄影', '电影', '民谣', '旅行', '吉他']\r\n})\r\n\r\n// 把DOM插入文档中\r\ndocument.body.appendChild(user.dom)\r\n\r\nsetTimeout(function () {\r\n  // 一秒以后改变firstName状态，DOM会跟着改变\r\n  user.setData({\r\n    firstName: 'Tomy'\r\n  })\r\n}, 1000)\r\n```\r\n\r\n### 方式二：多个模板实例\r\n```javascript\r\n// 用渲染函数构建虚拟模版类\r\nvar User = vTemplate(userCompiler)\r\n\r\nvar jerry = new User({\r\n  firstName: 'Jerry',\r\n  lastName: 'Green',\r\n})\r\n\r\nvar lucy = new User({\r\n  firstName: 'Lucy',\r\n  lastName: 'Green',\r\n})\r\n\r\n// 把DOM插入文档中\r\ndocument.body.appendChild(jerry.dom)\r\ndocument.body.appendChild(lucy.dom)\r\n\r\nsetTimeout(function () {\r\n  jerry.setData({\r\n    firstName: 'Tomy'\r\n  })\r\n  lucy.setData({\r\n    lastName: 'Blue'\r\n  })\r\n}, 1000)\r\n```\r\n\r\n详细例子可以查看`example`目录。\r\n\r\n## API\r\n\r\n### vTemplate(compileFunction, data)\r\n\r\n接收一个渲染函数和渲染数据，返回一个虚拟模版实例。实例包含一个`dom`和`setData`方法，`dom`为由渲染函数和数据渲染出来的真实的DOM。数据变更的时候通过`setData`方法改变数据状态，`dom`也会同步更新。\r\n\r\n### vTemplate(compileFunction)\r\n\r\n接收一个渲染函数，返回一个虚拟模版类，可以通过该类构建多个互不影响虚拟模版实例。\r\n\r\n```javascript\r\nvar User = vTemplate(userCompiler)\r\n\r\nvar jerry = new User({\r\n  firstName: 'Jerry',\r\n  lastName: 'Green',\r\n})\r\n\r\nvar lucy = new User({\r\n  firstName: 'Lucy',\r\n  lastName: 'Green',\r\n})\r\n\r\njerry.setData({\r\n  firstName: 'Tomy'\r\n})\r\n```\r\n\r\n### setData(data)\r\n虚拟模版实例的方法，传入的data会extend（浅复制）到原来的旧的data上。然后会用新的data渲染HTML，从而构建virtual dom。新的virtual dom会和旧的virtual dom进行对比，跑一次 Virtual-DOM 算法，更新真正的DOM。\r\n\r\n## Contribution\r\n\r\n\r\n安装全局依赖：\r\n\r\n    npm install browserify standard nodemon mocha istanbul uglify-js -g\r\n\r\n\r\nclone源码：\r\n\r\n    git clone https://github.com/livoras/virtual-template.git\r\n\r\n安装开发时依赖：\r\n\r\n    cd virtual-template && npm install\r\n\r\n开发运行时：\r\n\r\n    npm run dev\r\n\r\n然后可以修改源码，编写单元测试。\r\n\r\n打包编译：\r\n\r\n    npm run build\r\n\r\n## License\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2015 Livoras\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}